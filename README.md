# *Q dot R es* – a QR generator in standard Rust ✨
This is a QR code generator I wrote as a challenge for myself to improve at Rust. It's not intended to be an example of a fast, polished, or efficient QR generator. That being said, though, it does work reliably.
## Code
Making a QR code involves:
* Reed-Solomon error correction math – [**rdsm.rs**](src/rdsm.rs)
   * Finite field arithmetic in GF(2⁸) – [**galois.rs**](src/rdsm/galois.rs)
   * Polynomial rings over GF(2⁸) – [**polynomials.rs**](src/rdsm/polynomials.rs)
   * Precomputed tables – [**precomputed.rs**](src/rdsm/precomputed.rs) (note that the functions to generate the tables can be found in the `everything` branch)
* Technical aspects of the QR standard – [**qr_standard.rs**](src/qr_standard.rs)
   * Reference tables – [**tables.rs**](src/qr_standard/tables.rs)
   * Binary bit stream handling – [**badstream.rs**](src/qr_standard/badstream.rs)
   * Higher-level character handling – [**bitstream.rs**](src/qr_standard/bitstream.rs)
      * A pathfinding algorithm for size optimization – [**search.rs**](src/qr_standard/bitstream/search.rs)
* Bitmap format handling – [**image.rs**](src/image.rs)
## Input
`qr` accepts input both as arguments and from `stdin`. The following commands should all result in the same code. 
* Manually choosing ASCII encoding:
```
qr --ascii "Hello"
```
* Letting the program choose encoding automatically (which will result in ASCII encoding in this case, but far from always):
```
qr -i "Hello" 
```
* Piping text into the program (again choosing encoding automatically):
```
echo "Hello" | qr
```  
## Output
`qr` outputs XBM bitmaps, which is an uncompressed monochrome format consisting of plaintext hex data wrapped in C code:
```c
#define hello_width 37
#define hello_height 37
static unsigned char hello_bits[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xdf, 0x1f, 0x00, 0x00, 0x41, 0x55,
    0x10, 0x00, 0x00, 0x5d, 0x41, 0x17, 0x00, 0x00, 0x5d, 0x4f, 0x17, 0x00,
    0x00, 0x5d, 0x50, 0x17, 0x00, 0x00, 0x41, 0x4b, 0x10, 0x00, 0x00, 0x7f,
    0xd5, 0x1f, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x73, 0x8a, 0x1e,
    0x00, 0x00, 0xbf, 0xd6, 0x0f, 0x00, 0x00, 0x6a, 0x69, 0x09, 0x00, 0x00,
    0x97, 0xa5, 0x01, 0x00, 0x00, 0xf2, 0x32, 0x08, 0x00, 0x00, 0x00, 0x01,
    0x1b, 0x00, 0x00, 0x7f, 0xec, 0x0b, 0x00, 0x00, 0x41, 0xaf, 0x09, 0x00,
    0x00, 0x5d, 0x9f, 0x01, 0x00, 0x00, 0x5d, 0x64, 0x1b, 0x00, 0x00, 0x5d,
    0xc4, 0x03, 0x00, 0x00, 0x41, 0x2b, 0x00, 0x00, 0x00, 0x7f, 0xa9, 0x11,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00,
};
```
They are readable by free graphics software such as GIMP, though the ones output by this program are very small in size (less than 200 pixels wide) and will need to be rescaled.
